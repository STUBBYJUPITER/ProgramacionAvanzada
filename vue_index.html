<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vue</title>
</head>
<body>

    <div id ="contenedor">
       <form action="">
        <fieldset>
            <legend>
                Datos de acceso
            </legend>
            <br>

            <label >
                Correo electronico
            </label>
            <br>

            <input type="text" v-model="email">
            <br>
            <br>
            <label >
                password
            </label>
            <br>
            <input type="text" v-model="password">
            <br>

            <button @click="login" >
                 Iniciar Sesion
            </button>
            <br>

        </fieldset>

       </form>
       
      
    </div>

    <script src="https://unpkg.com/vue@3"></script>
    <script type="text/javascript">
        const {createApp} = Vue
       
        const app = createApp({
            data(){
                return{
                    //variables
                    users: null,
                    email:" ",
                    password:" "

                  
                }
            },
            methods:{
               //funciones
               login(e){
                var tmp_mail=this.email
                var tmp_usert=this.password
                var access = this.user.map(function(u){
                    if(tmp_mail===u.email){
                        if(tmp_psw===u.password){
                            var temporal_usr = {
                                name:u.name,
                                username: u.username,
                                email: u.email
                            }
                            localStorage.setItem('user',tmp_user)
                            alert("datos correctos")
                            window.location.href='users.html'
                        }

                    }
               })
            
                e.preventDefault()
                

               }
            },
            mounted(){
                fetch('Data/users.json')
                .then((res)=>res.json())
                .then((json)=>(this.users=json))
                .catch((err) => (console.log(err)))

            }
        }).mount('#contenedor')
    </script>
</body>
</html>